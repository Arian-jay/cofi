<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COFI-Cart</title>
    <link rel="icon" href="../src/img/LOGO.PNG" type="image/x-icon">
    <link rel="stylesheet" href="../dist/output.css">
    <style>
        .dropdown-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
</head>
<body class="bg-gray-100">
    <nav class="bg-white shadow-md">
        <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
            <div class="relative flex h-16 items-center justify-between">
                <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                    <button type="button" id="mobile-menu-button"
                        class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-700 hover:bg-gray-100 hover:text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="absolute -inset-0.5"></span>
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" id="burger">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" id="close">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                    <a href="index.html" class="flex flex-shrink-0 items-center">
                        <img class="h-8 w-auto" src="../src/img/LOGO.PNG" alt="COFI">
                        <span class="ml-2 text-xl font-bold text-gray-900" id="brand">COFI</span>
                    </a>
                    <div class="hidden sm:ml-6 sm:block">
                        <div class="flex space-x-4">
                            <a href="homepage.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-black">HOME</a>
                            <a href="menu.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-black">MENU</a>
                            <a href="#" class="rounded-md px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-black">CONTACT US</a>
                        </div>
                    </div>
                </div>
                <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                    <a type="button" href="cart.html"
                        class="md:me-4 relative rounded-full bg-white p-1 text-gray-700 hover:text-black focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-100">
                        <span class="absolute -inset-1.5"></span>
                        <span class="sr-only">cart</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                            <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                        </svg>
                    </a>
                    <div class="relative ml-3">
                        <div>
                            <button type="button" id="user-menu-button"
                                class="relative flex rounded-full bg-white text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-100 text-gray-700"
                                aria-expanded="false" aria-haspopup="true">
                                <span class="absolute -inset-1.5"></span>
                                <span class="sr-only">profile</span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 ">
                                    <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                        <div id="profile"
                            class="dropdown-menu absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden"
                            role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" tabindex="-1" id="user-menu-item-0">Your Profile</a>
                            <a href="setting.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" tabindex="-1" id="user-menu-item-1">Settings</a>
                            <a href="index.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" tabindex="-1" id="user-menu-item-2">Sign out</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="dropdown-menu hidden sm:hidden" id="mobile-menu">
            <div class="space-y-1 px-2 pb-3 pt-2">
                <a href="homepage.html" class="block rounded-md px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-black">HOME</a>
                <a href="menu.html" class="block rounded-md px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-black">MENU</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-black">CONTACT US</a>
            </div>
        </div>
    </nav>


    <div class="max-w-4xl mx-auto bg-white shadow-md rounded-lg overflow-hidden mt-4 px-4 py-6">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200" id="cartTable">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ITEM</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PRICE</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">QUANTITY</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TOTAL</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">DELETE</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr class="bg-gray-50" data-item-id="1">
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-16 w-16 sm:h-20 sm:w-20">
                                    <img class="h-16 w-16 sm:h-20 sm:w-20 rounded-full object-cover" src="../src/img/cofi-black.png" alt="COPI PREMIUM ROAST">
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900">COFI-BLACK</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">₱ <span class="item-price">59.00</span></div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <button class="quantity-btn minus bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-1 px-2 rounded-full transition duration-200 ease-in-out">-</button>
                                <input type="number" value="1" min="1" class="w-12 p-1 border rounded-md text-center bg-gray-100" readonly>
                                <button class="quantity-btn plus bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-1 px-2 rounded-full transition duration-200 ease-in-out">+</button>
                            </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
                            ₱ <span class="item-total">0</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <button class="text-red-600 hover:text-red-800 delete-btn transition duration-200 ease-in-out">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </td>
                    </tr>
                    <tr class="bg-gray-50" data-item-id="1">
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-16 w-16 sm:h-20 sm:w-20">
                                    <img class="h-16 w-16 sm:h-20 sm:w-20 rounded-full object-cover" src="../src/img/coffee-blue.PNG" alt="COPI PREMIUM ROAST">
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900">COFI-BLUE</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">₱ <span class="item-price">99.00</span></div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <button class="quantity-btn minus bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-1 px-2 rounded-full transition duration-200 ease-in-out">-</button>
                                <input type="number" value="1" min="1" class="w-12 p-1 border rounded-md text-center bg-gray-100" readonly>
                                <button class="quantity-btn plus bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-1 px-2 rounded-full transition duration-200 ease-in-out">+</button>
                            </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
                            ₱ <span class="item-total">0</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                            <button class="text-red-600 hover:text-red-800 delete-btn transition duration-200 ease-in-out">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="px-4 sm:px-6 py-4 bg-white mt-4">
            <div class="flex justify-end">
                <div class="text-right">
                    <div class="text-sm text-gray-700">ORDER TOTAL:</div>
                    <div class="text-2xl font-bold text-gray-900">₱ <span id="orderTotal">0.00</span></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="fixed bottom-8 right-8">
        <button class="bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-blue-700 transition duration-200 ease-in-out">
            Checkout
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const userMenuButton = document.getElementById('user-menu-button');
            const burgerIcon = document.getElementById('burger');
            const closeIcon = document.getElementById('close');
            const mobileMenu = document.getElementById('mobile-menu');
            const profileMenu = document.getElementById('profile');
            const cartTable = document.getElementById('cartTable');
            const orderTotalElement = document.getElementById('orderTotal');

            function toggleMenu(menu, button, isProfile = false) {
                let otherMenu, otherButton;

                if (isProfile) {
                    otherMenu = mobileMenu;
                    otherButton = mobileMenuButton;
                } else {
                    otherMenu = profileMenu;
                    otherButton = userMenuButton;
                }

                if (!otherMenu.classList.contains('hidden')) {
                    otherMenu.style.maxHeight = '0';
                    setTimeout(() => otherMenu.classList.add('hidden'), 300);
                    otherButton.setAttribute('aria-expanded', 'false');
                }

                if (menu.classList.contains('hidden')) {
                    menu.classList.remove('hidden');
                    menu.style.maxHeight = menu.scrollHeight + 'px';
                    button.setAttribute('aria-expanded', 'true');
                } else {
                    menu.style.maxHeight = '0';
                    setTimeout(() => menu.classList.add('hidden'), 300);
                    button.setAttribute('aria-expanded', 'false');
                }

                if (!isProfile) {
                    burgerIcon.classList.toggle('hidden');
                    closeIcon.classList.toggle('hidden');
                } else {
                    burgerIcon.classList.remove('hidden');
                    closeIcon.classList.add('hidden');
                }
            }

            mobileMenuButton.addEventListener('click', function() {
                toggleMenu(mobileMenu, mobileMenuButton);
            });

            userMenuButton.addEventListener('click', function() {
                toggleMenu(profileMenu, userMenuButton, true);
            });

            document.addEventListener('click', function(event) {
                if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
                    mobileMenu.style.maxHeight = '0';
                    setTimeout(() => mobileMenu.classList.add('hidden'), 300);
                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                    burgerIcon.classList.remove('hidden');
                    closeIcon.classList.add('hidden');
                }
                if (!userMenuButton.contains(event.target) && !profileMenu.contains(event.target)) {
                    profileMenu.style.maxHeight = '0';
                    setTimeout(() => profileMenu.classList.add('hidden'), 300);
                    userMenuButton.setAttribute('aria-expanded', 'false');
                }
            });

            function updateItemTotal(row) {
                const price = parseFloat(row.querySelector('.item-price').textContent);
                const quantity = parseInt(row.querySelector('input[type="number"]').value);
                const totalElement = row.querySelector('.item-total');
                const total = price * quantity;
                totalElement.textContent = total.toFixed(2);
            }

            function updateOrderTotal() {
                const itemTotals = Array.from(document.querySelectorAll('.item-total'));
                const orderTotal = itemTotals.reduce((sum, el) => sum + parseFloat(el.textContent), 0);
                orderTotalElement.textContent = orderTotal.toFixed(2);
            }

            cartTable.addEventListener('click', function(event) {
                if (event.target.classList.contains('quantity-btn')) {
                    const row = event.target.closest('tr');
                    const input = row.querySelector('input[type="number"]');
                    let value = parseInt(input.value);

                    if (event.target.classList.contains('plus')) {
                        input.value = value + 1;
                    } else if (event.target.classList.contains('minus') && value > 1) {
                        input.value = value - 1;
                    }

                    updateItemTotal(row);
                    updateOrderTotal();
                }

                if (event.target.closest('.delete-btn')) {
                    const row = event.target.closest('tr');
                    row.remove();
                    updateOrderTotal();
                }
            });

            document.querySelectorAll('tr[data-item-id]').forEach(updateItemTotal);
            updateOrderTotal();
        });
    </script>
</body>
</html>